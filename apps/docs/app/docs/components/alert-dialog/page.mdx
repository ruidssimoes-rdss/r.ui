# AlertDialog

A modal dialog for confirmations and destructive actions that requires explicit user action.

## Installation

```bash
npx r-ui add alert-dialog
```

## Usage

```tsx
import {
  AlertDialog,
  AlertDialogTrigger,
  AlertDialogContent,
  AlertDialogHeader,
  AlertDialogTitle,
  AlertDialogDescription,
  AlertDialogFooter,
  AlertDialogCancel,
  AlertDialogAction,
} from '@r-ui/react-native'
import { Button } from '@r-ui/react-native'

export default function MyComponent() {
  return (
    <AlertDialog>
      <AlertDialogTrigger asChild>
        <Button variant="destructive">Delete Account</Button>
      </AlertDialogTrigger>
      <AlertDialogContent>
        <AlertDialogHeader>
          <AlertDialogTitle>Are you absolutely sure?</AlertDialogTitle>
          <AlertDialogDescription>
            This action cannot be undone. This will permanently delete your
            account and remove your data from our servers.
          </AlertDialogDescription>
        </AlertDialogHeader>
        <AlertDialogFooter>
          <AlertDialogCancel>Cancel</AlertDialogCancel>
          <AlertDialogAction destructive onPress={() => console.log('Deleted')}>
            Delete
          </AlertDialogAction>
        </AlertDialogFooter>
      </AlertDialogContent>
    </AlertDialog>
  )
}
```

## Basic Example

<ComponentPreview code={`<AlertDialog>
  <AlertDialogTrigger asChild>
    <Button>Show Dialog</Button>
  </AlertDialogTrigger>
  <AlertDialogContent>
    <AlertDialogHeader>
      <AlertDialogTitle>Confirm Action</AlertDialogTitle>
      <AlertDialogDescription>
        Are you sure you want to proceed?
      </AlertDialogDescription>
    </AlertDialogHeader>
    <AlertDialogFooter>
      <AlertDialogCancel>Cancel</AlertDialogCancel>
      <AlertDialogAction>Continue</AlertDialogAction>
    </AlertDialogFooter>
  </AlertDialogContent>
</AlertDialog>`}>
  <div className="flex gap-4">
    <button className="px-5 py-2.5 font-semibold rounded-lg" style={{ backgroundColor: 'var(--btn-primary-bg)', color: 'var(--btn-primary-text)' }}>Show Dialog</button>
  </div>
</ComponentPreview>

## AlertDialog vs Dialog

AlertDialog is specifically designed for important confirmations:

| Feature | Dialog | AlertDialog |
|---------|--------|-------------|
| Tap outside to close | Yes | No |
| Requires explicit action | No | Yes |
| Use case | General modals | Confirmations, destructive actions |
| Structure | Flexible | Cancel + Action buttons |

Use AlertDialog when:
- Confirming destructive actions (delete, discard changes)
- Important decisions that shouldn't be accidentally dismissed
- Actions that require explicit user consent

## Destructive Action

<ComponentPreview code={`<AlertDialog>
  <AlertDialogTrigger asChild>
    <Button variant="destructive">Delete Account</Button>
  </AlertDialogTrigger>
  <AlertDialogContent>
    <AlertDialogHeader>
      <AlertDialogTitle>Delete Account</AlertDialogTitle>
      <AlertDialogDescription>
        This will permanently delete your account and all associated data.
        This action cannot be undone.
      </AlertDialogDescription>
    </AlertDialogHeader>
    <AlertDialogFooter>
      <AlertDialogCancel>Cancel</AlertDialogCancel>
      <AlertDialogAction destructive>Delete</AlertDialogAction>
    </AlertDialogFooter>
  </AlertDialogContent>
</AlertDialog>`}>
  <div className="flex gap-4">
    <button className="px-5 py-2.5 font-semibold rounded-lg" style={{ backgroundColor: 'var(--btn-destructive-bg)', color: 'var(--btn-destructive-text)' }}>Delete Account</button>
  </div>
</ComponentPreview>

## Dialog Preview

<ComponentPreview code={`<AlertDialogContent>
  <AlertDialogHeader>
    <AlertDialogTitle>Discard Changes?</AlertDialogTitle>
    <AlertDialogDescription>
      You have unsaved changes. Are you sure you want to discard them?
    </AlertDialogDescription>
  </AlertDialogHeader>
  <AlertDialogFooter>
    <AlertDialogCancel>Keep Editing</AlertDialogCancel>
    <AlertDialogAction destructive>Discard</AlertDialogAction>
  </AlertDialogFooter>
</AlertDialogContent>`}>
  <div className="w-full max-w-sm">
    <div className="rounded-xl p-6 shadow-xl" style={{ backgroundColor: 'var(--component-bg-elevated)', border: '1px solid var(--component-border)' }}>
      <div className="mb-4">
        <p className="text-lg font-semibold" style={{ color: 'var(--component-text)' }}>Discard Changes?</p>
        <p className="text-sm mt-2" style={{ color: 'var(--component-text-muted)' }}>You have unsaved changes. Are you sure you want to discard them?</p>
      </div>
      <div className="flex justify-end gap-3 mt-6">
        <button className="px-4 py-2 font-semibold rounded-lg text-sm" style={{ color: 'var(--btn-ghost-text)' }}>Keep Editing</button>
        <button className="px-4 py-2 font-semibold rounded-lg text-sm" style={{ backgroundColor: 'var(--btn-destructive-bg)', color: 'var(--btn-destructive-text)' }}>Discard</button>
      </div>
    </div>
  </div>
</ComponentPreview>

## Controlled

```tsx
import { useState } from 'react'

function ControlledAlertDialog() {
  const [open, setOpen] = useState(false)

  const handleDelete = () => {
    // Perform delete action
    console.log('Deleted!')
  }

  return (
    <>
      <Button onPress={() => setOpen(true)}>Delete Item</Button>
      <AlertDialog open={open} onOpenChange={setOpen}>
        <AlertDialogContent>
          <AlertDialogHeader>
            <AlertDialogTitle>Delete Item</AlertDialogTitle>
            <AlertDialogDescription>
              Are you sure you want to delete this item?
            </AlertDialogDescription>
          </AlertDialogHeader>
          <AlertDialogFooter>
            <AlertDialogCancel>Cancel</AlertDialogCancel>
            <AlertDialogAction destructive onPress={handleDelete}>
              Delete
            </AlertDialogAction>
          </AlertDialogFooter>
        </AlertDialogContent>
      </AlertDialog>
    </>
  )
}
```

## With Async Action

```tsx
function AsyncAlertDialog() {
  const [isDeleting, setIsDeleting] = useState(false)

  const handleDelete = async () => {
    setIsDeleting(true)
    try {
      await deleteAccount()
      // Handle success
    } catch (error) {
      // Handle error
    } finally {
      setIsDeleting(false)
    }
  }

  return (
    <AlertDialog>
      <AlertDialogTrigger asChild>
        <Button variant="destructive">Delete Account</Button>
      </AlertDialogTrigger>
      <AlertDialogContent>
        <AlertDialogHeader>
          <AlertDialogTitle>Delete Account</AlertDialogTitle>
          <AlertDialogDescription>
            This action cannot be undone.
          </AlertDialogDescription>
        </AlertDialogHeader>
        <AlertDialogFooter>
          <AlertDialogCancel disabled={isDeleting}>Cancel</AlertDialogCancel>
          <AlertDialogAction
            destructive
            onPress={handleDelete}
            disabled={isDeleting}
          >
            {isDeleting ? 'Deleting...' : 'Delete'}
          </AlertDialogAction>
        </AlertDialogFooter>
      </AlertDialogContent>
    </AlertDialog>
  )
}
```

## Props

### AlertDialog

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `open` | `boolean` | - | Controlled open state |
| `defaultOpen` | `boolean` | `false` | Default open state (uncontrolled) |
| `onOpenChange` | `(open: boolean) => void` | - | Callback when open state changes |

### AlertDialogTrigger

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `children` | `ReactNode` | - | Trigger element |
| `asChild` | `boolean` | `false` | Render as child element |
| `style` | `ViewStyle` | - | Additional styles |

### AlertDialogContent

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `children` | `ReactNode` | - | Content |
| `style` | `ViewStyle` | - | Additional styles |

### AlertDialogHeader

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `children` | `ReactNode` | - | Header content |
| `style` | `ViewStyle` | - | Additional styles |

### AlertDialogFooter

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `children` | `ReactNode` | - | Footer content |
| `style` | `ViewStyle` | - | Additional styles |

### AlertDialogTitle

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `children` | `ReactNode` | - | Title text |
| `style` | `TextStyle` | - | Additional styles |

### AlertDialogDescription

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `children` | `ReactNode` | - | Description text |
| `style` | `TextStyle` | - | Additional styles |

### AlertDialogAction

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `children` | `ReactNode` | - | Button content |
| `onPress` | `() => void` | - | Press handler (called before close) |
| `destructive` | `boolean` | `false` | Destructive styling (red) |
| `style` | `ViewStyle` | - | Additional styles |
| `textStyle` | `TextStyle` | - | Additional text styles |

### AlertDialogCancel

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `children` | `ReactNode` | - | Button content |
| `onPress` | `() => void` | - | Press handler (called before close) |
| `style` | `ViewStyle` | - | Additional styles |
| `textStyle` | `TextStyle` | - | Additional text styles |

## Key Differences from Dialog

1. **No tap-outside dismiss**: Users must explicitly choose Cancel or an Action
2. **Built-in action buttons**: `AlertDialogAction` and `AlertDialogCancel` with proper styling
3. **Destructive variant**: `AlertDialogAction` supports `destructive` prop for red styling
4. **Opinionated structure**: Designed for confirmation patterns
